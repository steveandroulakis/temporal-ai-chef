# Temporal AI Chef

A CLI demo application that demonstrates how Temporal's deterministic workflows can manage dynamic, multi-step plans generated by an LLM.

## Setup

1. Install dependencies:
```bash
uv sync
```

2. Set up environment variables:
```bash
cp .env.example .env
# Edit .env with your OpenAI API key
```

3. Start Temporal server (if not already running):
```bash
temporal server start-dev
```

## Usage

### Option 1: Full CLI Experience (Recommended)
```bash
# Terminal 1: Start the worker
uv run chef-worker

# Terminal 2: Run the interactive CLI
uv run temporal-ai-chef
```

### Option 2: Quick Testing
```bash
# Test end-to-end with embedded worker (30 second demo)
uv run chef-demo

# Test multiple different recipes (shows LLM plan generation)
uv run python temporal_ai_chef/test_different_recipes.py

# Test basic workflow functionality 
uv run python temporal_ai_chef/test_complete.py
```

### LLM Integration
- **With OpenAI API**: Set `OPENAI_API_KEY` in `.env` for dynamic LLM-powered plan generation
- **Without API Key**: Automatically falls back to realistic mock plans for demo purposes

## Architecture

- `workflow.py` - Core workflow logic with real-time queryable state management
- `activities.py` - LLM-powered and fallback activities (plan generation, tool selection, simulation)
- `worker.py` - Temporal worker that executes activities with thread pool
- `run_chef.py` - Interactive CLI client with real-time state polling and formatted display
- `data/` - JSON files with available tools (20 items) and ingredients (37 items)
- `test_*.py` - Comprehensive test suite for development and demonstration

## Key Features Demonstrated

✅ **Temporal Concepts**:
- Deterministic but not pre-determined workflow execution
- Real-time state querying during workflow execution
- Reliable activity execution with timeouts and retries
- Activity-workflow separation with proper data flow

✅ **LLM Integration**:
- Dynamic plan generation based on recipe input using GPT-4
- Context-aware tool selection for each cooking step
- Graceful fallback to realistic mock implementations
- Professional-quality cooking instructions with temperatures, timing, and techniques

✅ **Real-time CLI Experience**:
- Live progress updates every 500ms showing planning → executing → completed
- Visual step-by-step execution with tool usage and emojis
- Matches the exact UX flow specified in the original PRD
- Professional cooking terminology and realistic tool sequences